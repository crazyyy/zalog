$(".landform").on("submit",function(t){t.preventDefault(),$(this).addClass("current-form");var n=($(this),$.trim($(".current-form input[name=phone]").val())),a=$.trim($(".current-form input[name=name]").val()),e=$(this).serializeArray(),c=$(this).attr("action"),o=$(".current-form .thanx"),r=$(".current-form input[name=name]"),i=$(".current-form input[name=phone]"),s=$(".current-form .message");$(s).fadeIn(200),null!=a&&0==a.length?($(s).addClass("message-err").html("Укажите своё имя"),$(r).addClass("input-error"),event.preventDefault()):null!=n&&0==n.length?($(r).removeClass("input-error"),$(s).addClass("message-err").html("Укажите контактный телефон"),$(i).addClass("input-error"),event.preventDefault()):($(i).removeClass("input-error"),$.ajax({url:c,type:"POST",data:e,beforeSend:function(){$(s).html("Отправляем...")},success:function(t){$(s).addClass("message-ok"),$(s).html("Успешно отправилось!"),$(s).fadeOut(1500),$(o).fadeIn(1500)}})),$(this).removeClass("current-form")}),jQuery(function(t){var n={message:null,init:function(){t(".catalog-slides-container button").click(function(a){a.preventDefault(),t.get("data/action.php",function(a){t(a).modal({closeHTML:"<a href='#' title='Close' class='modal-close'>x</a>",autoPosition:!0,overlayId:"contact-overlay",containerId:"contact-container",onOpen:n.open,onShow:n.show,onClose:n.close})})})},open:function(n){var a=370,e=t("#contact-container .contact-title").html();t("#contact-container .contact-title").html("Loading..."),n.overlay.fadeIn(200,function(){n.container.fadeIn(200,function(){n.data.fadeIn(200,function(){t("#contact-container .contact-content").animate({height:a},function(){t("#contact-container .contact-title").html(e),t("#contact-container form").fadeIn(200,function(){t("#contact-container #contact-name").focus(),t("#contact-container .contact-cc").click(function(){var n=t("#contact-container #contact-cc");n.is(":checked")?n.attr("checked",""):n.attr("checked","checked")})})})})})})},show:function(a){t("#contact-container .contact-send").click(function(a){if(a.preventDefault(),n.validate()){var e=t("#contact-container .contact-message");e.fadeOut(function(){e.removeClass("contact-error").empty()}),t("#contact-container .contact-title").html("Sending..."),t("#contact-container form").fadeOut(200),t("#contact-container .contact-content").animate({height:"260px"},function(){t("#contact-container .contact-loading").fadeIn(200,function(){t.ajax({url:"data/action.php",data:t("#contact-container form").serialize()+"&action=send",type:"post",cache:!1,dataType:"html",success:function(n){t("#contact-container .contact-loading").fadeOut(200,function(){t("#contact-container .contact-title").html("Thank you!"),e.html(n).fadeIn(200)})},error:n.error})})})}else if(t("#contact-container .contact-message:visible").length>0){var e=t("#contact-container .contact-message div");e.fadeOut(200,function(){e.empty(),n.showError(),e.fadeIn(200)})}else t("#contact-container .contact-message").animate({height:"1px"},n.showError)})},close:function(n){t("#contact-container .contact-message").fadeOut(),t("#contact-container .contact-title").html("Goodbye..."),t("#contact-container form").fadeOut(200),t("#contact-container .contact-content").animate({height:40},function(){n.data.fadeOut(200,function(){n.container.fadeOut(200,function(){n.overlay.fadeOut(200,function(){t.modal.close()})})})})},error:function(t){alert(t.statusText)},validate:function(){n.message="",t("#contact-container #contact-name").val()||(n.message+="Укажите Ваше Имя. ");var a=t("#contact-container #contact-email").val();a?n.validateEmail(a)||(n.message+="Email is invalid. "):n.message+="Email is required. ",t("#contact-container #contact-message").val()||(n.message+="Message is required.");var e=t("#contact-container .contact-phone").val().length;return console.log(e),(!t("#contact-container .contact-phone").val()||15>e)&&(n.message+="Укажите Ваш телефон."),n.message.length>0?!1:!0},validateEmail:function(t){var n=t.lastIndexOf("@");if(1>n||n+1===t.length)return!1;if(/(\.{2,})/.test(t))return!1;var a=t.substring(0,n),e=t.substring(n+1);return a.length<1||a.length>64||e.length<4||e.length>255?!1:/(^\.|\.$)/.test(a)||/(^\.|\.$)/.test(e)?!1:(/^"(.+)"$/.test(a)||/^[-a-zA-Z0-9!#$%*\/?|^{}`~&'+=_\.]*$/.test(a))&&/^[-a-zA-Z0-9\.]*$/.test(e)&&-1!==e.indexOf(".")?!0:!1},showError:function(){t("#contact-container .contact-message").html(t('<div class="contact-error"></div>').append(n.message)).fadeIn(200)}};n.init()});